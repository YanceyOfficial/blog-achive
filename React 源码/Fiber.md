# Fiber

react 以前主要干的事情主要就是两件:

1. render 阶段 包括 reconciler 找出副作用的节点
2. commit 的阶段, 将变化的节点渲染到页面上

以前的 reconciler 是从根节点 root 开始不断的递归到各个子节点的查找, 我们知道递归树的函数要一气呵成, 不可以断, 否则退出递归后, 再一次又要重头开始, 所以随着页面的增大, 这一步骤所占用的 js 主线程会超过 16 ms 也就是会出现页面掉帧.
这个情况下, react 进行的重构, 引入了 fiber 架构, 注意, fiber 只是一个对象, 而 fiber 架构则是一种思想.

fiber 注意改变的是 react 的第一部分, 将 render 拆分成如下两个节点

1. schedule 阶段, 将 dom tree 结构改用链表的形式去表现.
2. reconciler 阶段, 去执行每一个链表的节点称为一个 fiber

然后再加上原来 commit 阶段
所以 fiber 的主要作用并不是减少了整个 render 过程, 相反 因为通过将原来的大任务, 拆分成每一个小任务后, 反而增长了整个任务的完成时间, 但是换来的确实, 每一个任务都会在浏览器一帧的绘制时间内去完成, 不会出现卡顿与掉帧.
