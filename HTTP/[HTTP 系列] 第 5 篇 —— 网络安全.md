# [HTTP 系列] 第 5 篇 —— 网络安全

## HTTPS

SSL 的全称是**Secure Socket Layer**. 由网景公司发明. 当发展到 3. 0 时被标准化. 改名为 TLS. 即**Transport Layer Security**. 但由于历史的原因还是有很多人称之为 SSL/TLS. 或者直接简称为 SSL.

## 洪泛攻击

关于网络安全方面的话题会专门放到一篇文章中去讲. 因为洪泛攻击 (SYN Flood) 涉及到了 TCP 相关知识. 所以这里提前聊一下.

在三次握手过程中. 服务器发送 SYN-ACK 之后. 收到客户端的 ACK 之前的 TCP 连接称为半连接(half-open connect).  此时服务器处于 SYN_RCVD 状态.  当收到 ACK 后. 服务器才能转入 ESTABLISHED 状态.

所以在短时间内伪造大量的不存在的 IP. 向服务器不断发送 SYN 包. 由于源地址是不存在的. 服务器需要不断的向客户端重新发送 `SYN/ACK` 直到超时.  这些伪造的 SYN 包将长时间占用未连接队列. 而正常的 SYN 被丢弃.  因此洪泛攻击会导致服务器运行缓慢. 严重会引起网络堵塞甚至系统瘫痪.  洪泛攻击是一种典型的 DoS/DDoS 攻击.  当你的服务器出现大量的 `半连接`. 几乎就可以认为遭受到了洪泛攻击.

如何预防洪泛攻击呢? 完全阻止是不可能的. 毕竟敌人在暗处. 服务器在明处.  网上介绍了几种方式: **缩短 SYN 超时时间**. **增加最大半连接数**. **过滤网关防护**. **SYN cookies** 等.  不过我认为这些方法都没什么卵用. 还是老老实实买 DDoS 高防吧.

## 加餐: 什么是代理

代理(Proxy)是 HTTP 协议中请求方和应答方中间的一个环节. 作为**中转站**. 既可以转发客户端的请求. 也可以转发服务器的应答.  常见的有四种:

- 匿名代理: 完全**隐匿**了被代理的机器. 外界看到的只是代理服务器;
- 透明代理: 顾名思义. 它在传输过程中是**透明开放**的. 外界既知道代理. 也知道客户端;
- 正向代理: 靠近客户端. 代表客户端向服务器发送请求;
- 反向代理: 靠近服务器端. 代表服务器响应客户端的请求;

比如 CDN 就是一种代理. 它代替源站服务器响应客户端的请求. 通常扮演着透明代理和反向代理的角色.  由于代理是在传输过程中插入了一个**中间层**, 它可以做很多事情:

- 负载均衡: 把访问请求均匀分散到多台机器. 实现访问集群化;
- 内容缓存: 暂存上下行的数据. 减轻后端的压力;
- 安全防护: 隐匿 IP, 使用 WAF 等工具抵御网络攻击. 保护被代理的机器;
- 数据处理: 提供压缩, 加密等额外的功能.
