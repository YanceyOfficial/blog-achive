# [HTTP 系列] 第 6 篇 —— 从输入 URL 回车到页面呈现

> 这里是《写给前端工程师的 HTTP 系列》终极篇, 从输入 URL 回车到页面呈现到底发生了什么. 这篇文章会从 DNS, TCP/IP, HTTP, CDN, 负载均衡, 浏览器原理等方面详细描述.

## DNS 解析

从操作系统, 本地 DNS, 根 DNS, 顶级 DNS, 权威 DNS 的层层解析, 当然这中间有缓存.

## TCP/IP

浏览器用 TCP 的三次握手与服务器建立连接; 浏览器向服务器发送拼好的报文; 服务器收到报文后处理请求, 同样拼好报文再发给浏览器.

## CDN

DNS 解析可能会给出 CDN 服务器的 IP 地址, 这样你拿到的就会是 CDN 服务器而不是目标网站的实际地址.

## 服务器负载均衡

目标网站的服务器对外表现的是一个 IP 地址, 但为了能够扛住高并发, 在内部也是一套复杂的架构.通常在入口是负载均衡设备, 例如四层的 LVS 或者七层的 Nginx, 在后面是许多的服务器, 构成一个更强更稳定的集群.

负载均衡设备会先访问系统里的缓存服务器, 通常有 memory 级缓存 Redis 和 disk 级缓存 Varnish, 它们的作用与 CDN 类似, 不过是工作在内部网络里, 把最频繁访问的数据缓存几秒钟或几分钟, 减轻后端应用服务器的压力.

如果缓存服务器里也没有, 那么负载均衡设备就要把请求转发给应用服务器了.

## 浏览器原理

浏览器解析报文, 渲染输出页面.
